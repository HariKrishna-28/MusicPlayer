{"version":3,"sources":["Login.jsx","useAuth.jsx","TrackSearchResult.jsx","Player.jsx","Dashboard.jsx","App.js","index.js"],"names":["Login","className","style","minHeight","href","baseUrl","TrackSearchResult","track","chooseTrack","onClick","src","albumUrl","alt","height","width","title","artist","Player","accessToken","trackUri","useState","play","setPlay","useEffect","token","showSaveIcon","callback","state","isPlaying","uris","spotifyApi","SpotifyWebApi","clientId","Dashboard","code","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","axios","post","then","res","data","window","history","pushState","catch","location","interval","setInterval","clearInterval","useAuth","search","setSearch","searchResults","setSearchResults","playingTrack","setPlayingTrack","lyrics","setLyrics","get","params","cancel","searchTracks","body","tracks","items","map","smallestAlbumimage","album","images","reduce","smallest","image","artists","name","uri","url","Form","Control","type","placeholder","value","onChange","e","target","length","whiteSpace","URLSearchParams","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2b74aa95.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst AUTH_URL = \"https://accounts.spotify.com/authorize?client_id=a55eecdff1ff4bf28749ee4977f2d2a3&response_type=code&redirect_uri=http://localhost:3000&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state\"\r\n\r\nconst Login = () => {\r\n    return (\r\n        <div className='flex justify-center items-center' style={{ minHeight: '100vh' }}>\r\n            <a className=' no-underline bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded' href={AUTH_URL} >Login With Spotify</a>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import { useState, useEffect } from \"react\"\r\nimport axios from \"axios\"\r\nconst baseUrl = \"https://music-player-using-spotifyapi.herokuapp.com\"\r\n\r\nexport default function useAuth(code) {\r\n    const [accessToken, setAccessToken] = useState()\r\n    const [refreshToken, setRefreshToken] = useState()\r\n    const [expiresIn, setExpiresIn] = useState()\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .post(`${baseUrl}/login`, {\r\n                code,\r\n            })\r\n            .then(res => {\r\n                setAccessToken(res.data.accessToken)\r\n                setRefreshToken(res.data.refreshToken)\r\n                setExpiresIn(res.data.expiresIn)\r\n                window.history.pushState({}, null, `${baseUrl}/`)\r\n            })\r\n            .catch(() => {\r\n                window.location = `${baseUrl}/`\r\n            })\r\n    }, [code])\r\n\r\n    useEffect(() => {\r\n        if (!refreshToken || !expiresIn) return\r\n        const interval = setInterval(() => {\r\n            axios\r\n                .post(`${baseUrl}/refresh`, {\r\n                    refreshToken,\r\n                })\r\n                .then(res => {\r\n                    setAccessToken(res.data.accessToken)\r\n                    setExpiresIn(res.data.expiresIn)\r\n                })\r\n                .catch(() => {\r\n                    window.location = `${baseUrl}/`\r\n                })\r\n        }, (expiresIn - 60) * 1000)\r\n\r\n        return () => clearInterval(interval)\r\n    }, [refreshToken, expiresIn])\r\n\r\n    return accessToken\r\n}","import React from 'react'\r\n\r\nconst TrackSearchResult = ({ track, chooseTrack }) => {\r\n    function handlePlay() {\r\n        chooseTrack(track)\r\n    }\r\n\r\n    return (\r\n        <div className='flex m-2 items-center cursor-pointer' onClick={handlePlay}>\r\n            <img src={track.albumUrl} alt=\"artist\" style={{ height: \"64px\", width: \"64px\" }} />\r\n            <div className=\"ml-3\">\r\n                <div>{track.title}</div>\r\n                <div className=\"text-muted\">{track.artist}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TrackSearchResult\r\n","import React, { useState, useEffect } from 'react'\r\nimport SpotifyPlayer from \"react-spotify-web-playback\"\r\n\r\nconst Player = ({ accessToken, trackUri }) => {\r\n\r\n    const [play, setPlay] = useState(false)\r\n\r\n    useEffect(() => setPlay(true), [trackUri])\r\n    if (!accessToken) return null\r\n\r\n    return <SpotifyPlayer\r\n        token={accessToken}\r\n        showSaveIcon\r\n        callback={state => {\r\n            if (!state.isPlaying) setPlay(false)\r\n        }}\r\n        play={play}\r\n        uris={trackUri ? [trackUri] : []}\r\n    />\r\n}\r\n\r\nexport default Player\r\n","import React, { useState, useEffect } from 'react'\r\nimport useAuth from './useAuth'\r\nimport { Form } from 'react-bootstrap'\r\nimport SpotifyWebApi from 'spotify-web-api-node'\r\nimport TrackSearchResult from './TrackSearchResult'\r\nimport Player from './Player'\r\nimport axios from 'axios'\r\nconst baseUrl = \"https://music-player-using-spotifyapi.herokuapp.com\"\r\n\r\n\r\n\r\nconst spotifyApi = new SpotifyWebApi({\r\n    clientId: \"a55eecdff1ff4bf28749ee4977f2d2a3\"\r\n})\r\n\r\n\r\nconst Dashboard = ({ code }) => {\r\n    const accessToken = useAuth(code)\r\n    const [search, setSearch] = useState('')\r\n    const [searchResults, setSearchResults] = useState([])\r\n    const [playingTrack, setPlayingTrack] = useState()\r\n    const [lyrics, setLyrics] = useState(\"\")\r\n\r\n    function chooseTrack(track) {\r\n        setPlayingTrack(track)\r\n        setSearch(\"\")\r\n        setLyrics(\"\")\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!playingTrack) return\r\n\r\n        axios.get(`${baseUrl}/lyrics`, {\r\n            params: {\r\n                track: playingTrack.title,\r\n                artist: playingTrack.artist,\r\n\r\n            }\r\n        }).then(res => {\r\n            setLyrics(res.data.lyrics)\r\n        })\r\n\r\n\r\n    }, [playingTrack])\r\n\r\n    useEffect(() => {\r\n        if (!accessToken) return\r\n        spotifyApi.setAccessToken(accessToken)\r\n    }, [accessToken])\r\n\r\n    useEffect(() => {\r\n        if (!search) return setSearchResults([])\r\n        if (!accessToken) return\r\n\r\n        let cancel = false\r\n\r\n        spotifyApi.searchTracks(search).then(res => {\r\n            if (cancel) return\r\n            setSearchResults(res.body.tracks.items.map(track => {\r\n                const smallestAlbumimage = track.album.images.reduce((smallest, image) => {\r\n                    if (image.height < smallest.height) return image\r\n                    return smallest\r\n                }, track.album.images[0])\r\n\r\n                return {\r\n                    artist: track.artists[0].name,\r\n                    title: track.name,\r\n                    uri: track.uri,\r\n                    albumUrl: smallestAlbumimage.url\r\n                }\r\n            })\r\n            )\r\n        })\r\n\r\n        return () => cancel = true\r\n    }, [search, accessToken])\r\n\r\n    return (\r\n        <div className=\" container mx-auto flex flex-col py-2\" style={{ height: \"100vh\" }}>\r\n\r\n            <Form.Control type=\"search\" placeholder=\"Search Songs/ Artists\" value={search} onChange={e => setSearch(e.target.value)} />\r\n\r\n            <div className=\"flex-grow my-2 overflow-y-auto\">\r\n                {searchResults.map(track => (\r\n                    <TrackSearchResult track={track} key={track.uri} chooseTrack={chooseTrack} />\r\n                ))}\r\n                {searchResults.length === 0 && (\r\n\r\n                    <div className=\"text-center\" style={{ whiteSpace: 'pre' }}>\r\n                        {lyrics}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div><Player accessToken={accessToken} trackUri={playingTrack?.uri} /></div>\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Dashboard","import './App.css';\r\nimport Login from './Login';\r\nimport Dashboard from './Dashboard';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\n// import dotenv from 'dotenv'\r\n\r\nconst code = new URLSearchParams(window.location.search).get('code')\r\n// dotenv.config('../config.env')\r\n\r\nfunction App() {\r\n  return code ? <Dashboard code={code} /> : <Login />\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}